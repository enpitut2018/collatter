<!DOCTYPE HTML>
<html lang="ja">
   <head>
       <meta charset="UTF-8">
       <title>画像ファイルをCANVSでプレビュー</title>
   </head>

   <body>

        <h1>新しいコラ画像を追加する</h1>

        <% if @template %>
          <%= @template.image.to_s %>
        <% end %>

        <%= form_with(model: @colla, local: true, id: :colla_new) do |form| %>
          <% if @colla.errors.any? %>
            <div id="error_explanation">
              <h2><%= pluralize(@colla.errors.count, "error") %> prohibited this colla from being saved:</h2>

              <ul>
                <% @colla.errors.full_messages.each do |message| %>
                  <li><%= message %></li>
                <% end %>
              </ul>
            </div>
          <% end %>

          <div class="field">
            <h3>元の画像をアップロードしてください</h3>
            <%# form.label "元の画像をアップロードしてください" %>
            <%= form.file_field :image, id: :colla_image %>
          </div>

          <%= form.hidden_field :image_data_url, id: :image_data_url %>

          <!-- Canvas -->
          <div>
            <h3>入れたい文字を入力してください</h3>
            <textarea id="colla-text" name="text" rows="3"/></textarea><br>
            <h3>文字を入れたい場所をクリックしてください</h3>
            <canvas id="cnvs"></canvas><br>
            <input type="button" value="文字追加" onclick="OnButtonClick();"/><br />
          </div>
          <br>
          <div class="field">
            <%= form.label :コラ画像のタグを入力してください %>
            <%= form.text_field :tag_txt, id: :colla_tag_txt %>
          </div>

          <div class="actions">
            <%= form.submit %>
          </div>
        <% end %>
   </body>
</html>
